rmq的顺序消息,可分为局部顺序和全局顺序

局部:多个messageQueue互相隔离,发送的时候指定mq

全局:Topic只设定一个mq,性能较差,不推荐使用(待探究原理?浪费topic资源?)



顺序消息必须采用同步发送,异步发送的话,如果中间的消息发送失败再重试的话,会打乱消息的顺序(但是或许可以通过设置id来避免这个问题? 在消息数量较少时,拉取到的消息通过id排序来消费,但是消息量大时,每一批拉取的消息不一定是按批顺序排列的,这一批可能id比后面的大,因此不可用,除非可以保证批层次上的顺序)



同一个消息队列只允许同一消费组的一个消费者实例消费,consumer在向broker拉取消息的时候,需要在broker端对mq加锁,只有获取到锁才能进行消费.

